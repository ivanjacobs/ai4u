<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.533">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>From Code to Commerce: PyTorch Deep Dive into AI, Mathematics, and Business Tactics - 1&nbsp; Data Collection</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../summary.html" rel="next">
<link href="../trading/dppa.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../trading/aitrading_introduction.html">AI-Driven Trading</a></li><li class="breadcrumb-item"><a href="../trading/Data Collection.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Collection</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">From Code to Commerce: PyTorch Deep Dive into AI, Mathematics, and Business Tactics</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../trading/aitrading_introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AI-Driven Trading</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../trading/trading_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tactical Trading Strategies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../trading/dppa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dynamic Price Projection Algorithm (DPPA)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../trading/Data Collection.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Collection</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#python-virtual-environment" id="toc-python-virtual-environment" class="nav-link active" data-scroll-target="#python-virtual-environment"><span class="header-section-number">1.1</span> Python Virtual Environment</a>
  <ul class="collapse">
  <li><a href="#creating-an-anaconda-environment" id="toc-creating-an-anaconda-environment" class="nav-link" data-scroll-target="#creating-an-anaconda-environment"><span class="header-section-number">1.1.1</span> Creating an Anaconda Environment:</a></li>
  <li><a href="#creating-a-virtual-environment" id="toc-creating-a-virtual-environment" class="nav-link" data-scroll-target="#creating-a-virtual-environment"><span class="header-section-number">1.1.4</span> Creating a Virtual Environment:</a></li>
  </ul></li>
  <li><a href="#data-collection" id="toc-data-collection" class="nav-link" data-scroll-target="#data-collection"><span class="header-section-number">1.2</span> Data Collection</a>
  <ul class="collapse">
  <li><a href="#data-reprocessing" id="toc-data-reprocessing" class="nav-link" data-scroll-target="#data-reprocessing"><span class="header-section-number">1.2.1</span> Data Reprocessing</a></li>
  <li><a href="#data-retrieval" id="toc-data-retrieval" class="nav-link" data-scroll-target="#data-retrieval"><span class="header-section-number">1.2.2</span> 1. <strong>Data Retrieval:</strong></a></li>
  <li><a href="#handling-missing-data" id="toc-handling-missing-data" class="nav-link" data-scroll-target="#handling-missing-data"><span class="header-section-number">1.2.3</span> 2. <strong>Handling Missing Data:</strong></a></li>
  <li><a href="#feature-engineering" id="toc-feature-engineering" class="nav-link" data-scroll-target="#feature-engineering"><span class="header-section-number">1.2.4</span> 3. <strong>Feature Engineering:</strong></a></li>
  <li><a href="#normalizationscaling" id="toc-normalizationscaling" class="nav-link" data-scroll-target="#normalizationscaling"><span class="header-section-number">1.2.5</span> 4. <strong>Normalization/Scaling:</strong></a></li>
  <li><a href="#removing-outliers" id="toc-removing-outliers" class="nav-link" data-scroll-target="#removing-outliers"><span class="header-section-number">1.2.6</span> 5. <strong>Removing Outliers:</strong></a></li>
  <li><a href="#time-resampling" id="toc-time-resampling" class="nav-link" data-scroll-target="#time-resampling"><span class="header-section-number">1.2.7</span> 6. <strong>Time Resampling:</strong></a></li>
  <li><a href="#labeling" id="toc-labeling" class="nav-link" data-scroll-target="#labeling"><span class="header-section-number">1.2.8</span> 7. <strong>Labeling:</strong></a></li>
  <li><a href="#splitting-data" id="toc-splitting-data" class="nav-link" data-scroll-target="#splitting-data"><span class="header-section-number">1.2.9</span> 8. <strong>Splitting Data:</strong></a></li>
  <li><a href="#handling-categorical-data" id="toc-handling-categorical-data" class="nav-link" data-scroll-target="#handling-categorical-data"><span class="header-section-number">1.2.10</span> 9. <strong>Handling Categorical Data:</strong></a></li>
  <li><a href="#save-processed-data" id="toc-save-processed-data" class="nav-link" data-scroll-target="#save-processed-data"><span class="header-section-number">1.2.11</span> 10. <strong>Save Processed Data:</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../trading/aitrading_introduction.html">AI-Driven Trading</a></li><li class="breadcrumb-item"><a href="../trading/Data Collection.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Collection</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Collection</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i></button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="python-virtual-environment" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="python-virtual-environment"><span class="header-section-number">1.1</span> Python Virtual Environment</h2>
<p>A virtual environment in Python is a self-contained directory that encapsulates a specific Python interpreter along with its own set of libraries and dependencies. It allows you to create isolated environments for different Python projects, each with its own set of packages, without interfering with the system-wide Python installation.</p>
<p>Here are some key concepts related to virtual environments in Python:</p>
<ol type="1">
<li><strong>Isolation:</strong>
<ul>
<li>A virtual environment provides a segregated space where you can install Python packages without affecting the global Python environment. This isolation is crucial when working on multiple projects that might require different versions of libraries or have conflicting dependencies.</li>
</ul></li>
<li><strong>Package Management:</strong>
<ul>
<li>With a virtual environment, you can install, upgrade, and remove Python packages using tools like <code>pip</code> without affecting the rest of your system. This ensures that each project has its own set of dependencies.</li>
</ul></li>
<li><strong>Version Control:</strong>
<ul>
<li>Virtual environments help manage Python interpreter versions. You can create a virtual environment with a specific version of Python, ensuring consistency across different projects. This is particularly useful when transitioning between Python 2 and Python 3 or when working with different Python versions for compatibility reasons.</li>
</ul></li>
<li><strong>Dependency Management:</strong>
<ul>
<li>Virtual environments allow you to specify and manage dependencies for each project. You can create a <code>requirements.txt</code> file listing all the dependencies and their versions, making it easy for others to recreate the same environment.</li>
</ul></li>
<li><strong>Activation and Deactivation:</strong>
<ul>
<li>Activating a virtual environment modifies the system’s <code>PATH</code> variable to prioritize the virtual environment’s binaries. This means that when you run Python or use <code>pip</code>, it refers to the versions within the virtual environment. Once your work in the virtual environment is done, you can deactivate it to return to the global Python environment.</li>
</ul></li>
<li><strong>Cleaner Project Directories:</strong>
<ul>
<li>Virtual environments keep project directories clean by isolating project-specific dependencies. This makes it easier to share projects with others and avoids conflicts with system-wide packages.</li>
</ul></li>
<li><strong>Compatibility:</strong>
<ul>
<li>Virtual environments are compatible across operating systems. You can create a virtual environment on one machine, and someone else can recreate the same environment on a different machine by using the same configuration files (e.g., <code>requirements.txt</code>).</li>
</ul></li>
<li><strong>Built-in Modules:</strong>
<ul>
<li>Python comes with a built-in module called <code>venv</code> (since Python 3.3) for creating virtual environments. Additionally, popular third-party tools like <code>virtualenv</code> and <code>conda</code> can also be used to create virtual environments.</li>
</ul></li>
</ol>
<p>To summarize, virtual environments in Python are a valuable tool for managing project-specific dependencies, ensuring version consistency, and maintaining a clean and organized development environment. They contribute to better project portability, reproducibility, and efficient collaboration among developers.</p>
<p>Creating Anaconda environments and virtual environments in Python can be a straightforward process. Below are the steps for both Windows and Linux:</p>
<section id="creating-an-anaconda-environment" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="creating-an-anaconda-environment"><span class="header-section-number">1.1.1</span> Creating an Anaconda Environment:</h3>
<section id="for-windows" class="level4" data-number="1.1.1.1">
<h4 data-number="1.1.1.1" class="anchored"><span class="header-section-number">1.1.1.1</span> For Windows:</h4>
<ol type="1">
<li><p><strong>Download and Install Anaconda:</strong></p>
<ul>
<li>Download the Anaconda distribution for Windows from the <a href="https://www.anaconda.com/products/distribution">official Anaconda website</a>.</li>
<li>Run the installer and follow the installation instructions.</li>
</ul></li>
<li><p><strong>Open Anaconda Navigator:</strong></p>
<ul>
<li>Once installed, open the Anaconda Navigator.</li>
</ul></li>
<li><p><strong>Create a New Environment:</strong></p>
<ul>
<li>Click on the “Environments” tab.</li>
<li>Click the “Create” button.</li>
<li>Enter a name for your new environment, select Python version, and choose the packages you need.</li>
<li>Click “Create” to create the environment.</li>
</ul></li>
<li><p><strong>Activate the Environment:</strong></p>
<ul>
<li>To activate the environment, open the “Home” tab.</li>
<li>From the Applications on the left, select “Home” and then choose your environment from the drop-down list.</li>
<li>Click on “Home” again, and you should see your environment name in the right pane.</li>
<li>Click “Install” to install packages in the selected environment.</li>
</ul></li>
<li><p>To create a new environment using Conda, you can use the <code>conda create</code> command. Below are the basic steps:</p>
<h3 id="create-a-new-conda-environment" data-number="1.1.2" class="anchored" data-anchor-id="for-windows"><span class="header-section-number">1.1.2</span> Create a new Conda environment:</h3>
<ol type="1">
<li><p><strong>Open a terminal or command prompt:</strong></p>
<ul>
<li>On Windows, you can use the Anaconda Prompt or any command prompt.</li>
<li>On Linux or macOS, you can use a terminal.</li>
</ul></li>
<li><p><strong>Run the following command:</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">--name</span> your_environment_name python=3.x</span></code></pre></div>
<p>Replace <code>your_environment_name</code> with the desired name for your new environment, and <code>3.x</code> with the desired Python version (e.g., <code>3.8</code>).</p>
<p>For example, to create an environment named “myenv” with Python 3.8, you would run:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">--name</span> myenv python=3.8</span></code></pre></div></li>
<li><p><strong>Activate the new environment:</strong></p>
<ul>
<li><p>On Windows:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate your_environment_name</span></code></pre></div></li>
<li><p>On Linux or macOS:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> activate your_environment_name</span></code></pre></div>
<p>Replace <code>your_environment_name</code> with the name you provided earlier.</p></li>
</ul>
<p>After activation, your command prompt or terminal should indicate that you are now working in the new environment.</p></li>
<li><p><strong>Install additional packages (optional):</strong></p>
<ul>
<li><p>You can install additional packages in your new environment using <code>conda install</code> or <code>pip install</code> as needed. For example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install numpy pandas</span></code></pre></div></li>
</ul></li>
<li><p><strong>Deactivate the environment (when done):</strong></p>
<ul>
<li><p>When you’re finished working in the environment, you can deactivate it using the following command:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> deactivate</span></code></pre></div>
<p>This will return you to the base (root) environment.</p></li>
</ul></li>
</ol>
<h3 id="note" data-number="1.1.3" class="anchored"><span class="header-section-number">1.1.3</span> Note:</h3>
<ul>
<li>It’s a good practice to include the Python version when creating a new environment to ensure compatibility.</li>
<li>You can customize the environment further by installing specific versions of packages or specifying additional packages during the creation process.</li>
<li>Remember to activate the environment whenever you want to work within it, and deactivate it when you’re finished.</li>
</ul>
<p>By following these steps, you can create and manage Conda environments for your Python projects.</p></li>
</ol>
</section>
<section id="for-linux" class="level4" data-number="1.1.3.1">
<h4 data-number="1.1.3.1" class="anchored" data-anchor-id="for-linux"><span class="header-section-number">1.1.3.1</span> For Linux:</h4>
<ol type="1">
<li><strong>Download and Install Anaconda:</strong>
<ul>
<li>Download the Anaconda distribution for Linux from the <a href="https://www.anaconda.com/products/distribution">official Anaconda website</a>.</li>
<li>Open a terminal in the directory where the installer was downloaded.</li>
<li>Run the following command to install Anaconda: <code>bash Anaconda3-&lt;version&gt;-Linux-x86_64.sh</code></li>
<li>Follow the on-screen instructions to complete the installation.</li>
</ul></li>
<li><strong>Open Anaconda Navigator:</strong>
<ul>
<li>Once installed, open a terminal and run <code>anaconda-navigator</code>.</li>
</ul></li>
<li><strong>Create a New Environment:</strong>
<ul>
<li>In Anaconda Navigator, go to the “Environments” tab.</li>
<li>Click the “Create” button.</li>
<li>Enter a name for your new environment, select Python version, and choose the packages you need.</li>
<li>Click “Create” to create the environment.</li>
</ul></li>
<li><strong>Activate the Environment:</strong>
<ul>
<li>To activate the environment, open a terminal and run: <code>conda activate your_environment_name</code></li>
<li>Replace <code>your_environment_name</code> with the actual name of your environment.</li>
</ul></li>
</ol>
</section>
</section>
<section id="creating-a-virtual-environment" class="level3" data-number="1.1.4">
<h3 data-number="1.1.4" class="anchored" data-anchor-id="creating-a-virtual-environment"><span class="header-section-number">1.1.4</span> Creating a Virtual Environment:</h3>
<section id="for-windows-1" class="level4" data-number="1.1.4.1">
<h4 data-number="1.1.4.1" class="anchored" data-anchor-id="for-windows-1"><span class="header-section-number">1.1.4.1</span> For Windows:</h4>
<ol type="1">
<li><strong>Open a Command Prompt:</strong>
<ul>
<li>Open the command prompt.</li>
</ul></li>
<li><strong>Install <code>virtualenv</code>:</strong>
<ul>
<li>Run the following command to install <code>virtualenv</code>: <code>pip install virtualenv</code></li>
</ul></li>
<li><strong>Create a Virtual Environment:</strong>
<ul>
<li>Navigate to the directory where you want to create the virtual environment.</li>
<li>Run the following command: <code>python -m venv your_virtual_environment</code></li>
<li>Replace <code>your_virtual_environment</code> with the desired name for your virtual environment.</li>
</ul></li>
<li><strong>Activate the Virtual Environment:</strong>
<ul>
<li>Navigate to the virtual environment’s directory.</li>
<li>Run: <code>.\your_virtual_environment\Scripts\activate</code></li>
<li>You should see the virtual environment name in the command prompt.</li>
</ul></li>
</ol>
</section>
<section id="for-linux-1" class="level4" data-number="1.1.4.2">
<h4 data-number="1.1.4.2" class="anchored" data-anchor-id="for-linux-1"><span class="header-section-number">1.1.4.2</span> For Linux:</h4>
<ol type="1">
<li><strong>Open a Terminal:</strong>
<ul>
<li>Open a terminal.</li>
</ul></li>
<li><strong>Install <code>virtualenv</code>:</strong>
<ul>
<li>Run the following command to install <code>virtualenv</code>: <code>pip install virtualenv</code></li>
</ul></li>
<li><strong>Create a Virtual Environment:</strong>
<ul>
<li>Navigate to the directory where you want to create the virtual environment.</li>
<li>Run the following command: <code>python -m venv your_virtual_environment</code></li>
<li>Replace <code>your_virtual_environment</code> with the desired name for your virtual environment.</li>
</ul></li>
<li><strong>Activate the Virtual Environment:</strong>
<ul>
<li>Navigate to the virtual environment’s directory.</li>
<li>Run: <code>source your_virtual_environment/bin/activate</code></li>
<li>You should see the virtual environment name in the terminal.</li>
</ul></li>
</ol>
<p>These steps should help you create Anaconda environments and virtual environments on both Windows and Linux systems. Adjust the environment names and versions as needed.</p>
<p>So lets create and activate an anaconda environment for our project.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">--name</span> dppa <span class="at">-y</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate dppa</span></code></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The given Bash command <span class="citation" data-cites="bash_conda_create">(<a href="../references.html#ref-bash_conda_create" role="doc-biblioref"><strong>bash_conda_create?</strong></a>)</span> is a Conda command used to create a new Conda environment. Let’s break down the components of the command:</p>
<ul>
<li><p><code>conda create</code>: This part of the command instructs Conda to create a new environment.</p></li>
<li><p><code>--name dppa</code>: This option specifies the name of the new environment. In this case, the environment is named “dppa.” You can replace “dppa” with any desired name for your environment.</p></li>
<li><p><code>-y</code>: This option stands for “yes” and is used to automatically confirm and proceed with the installation without prompting the user for confirmation. Adding <code>-y</code> is useful, especially when you want to automate environment creation in scripts or ensure a smooth, non-interactive installation.</p></li>
</ul>
<p>Putting it all together, the command <code>conda create --name dppa -y</code> creates a new Conda environment named “dppa” without asking for user confirmation during the process. This environment can later be activated and used for specific Python projects, allowing for isolation and management of dependencies.</p>
</div>
</div>
</section>
</section>
</section>
<section id="data-collection" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="data-collection"><span class="header-section-number">1.2</span> Data Collection</h2>
<p>We are going to use <strong><code>yfinance</code></strong> to fetch historical data. <strong><code>yfinance</code></strong> is a Python library that provides a simple and convenient way to access financial data from Yahoo Finance. Yahoo Finance is a popular platform that offers a wide range of financial information, including historical stock prices, current market data, company information, and more. Here are the main functionalities and features of the <strong><code>yfinance</code></strong> library:</p>
<ol type="1">
<li><p><strong>Historical Data Retrieval:</strong></p>
<ul>
<li><strong><code>yfinance</code></strong> allows users to download historical stock price data for a specific ticker symbol over a specified time period. This data includes daily Open, High, Low, Close prices, and trading volume.</li>
</ul></li>
<li><p><strong>Current Market Data:</strong></p>
<ul>
<li>Users can retrieve real-time market data, including the latest stock price, bid and ask prices, trading volume, and more.</li>
</ul></li>
<li><p><strong>Dividend and Split Information:</strong></p>
<ul>
<li>The library provides access to information about dividends and stock splits for a given ticker symbol.</li>
</ul></li>
<li><p><strong>Financial Statements and Company Information:</strong></p>
<ul>
<li><strong><code>yfinance</code></strong> enables users to fetch financial statements, such as income statements, balance sheets, and cash flow statements. It also provides general information about a company, including its name, sector, and industry.</li>
</ul></li>
<li><p><strong>Option and Warrant Data:</strong></p>
<ul>
<li>Users can obtain option and warrant data, including details on options chains and expiration dates.</li>
</ul></li>
<li><p><strong>Support for Multiple Ticker Symbols:</strong></p>
<ul>
<li>The library supports the retrieval of data for multiple ticker symbols in a single call, allowing for efficient data retrieval for a portfolio of stocks.</li>
</ul></li>
<li><p><strong>Customizable Date Ranges:</strong></p>
<ul>
<li>Users can specify custom start and end dates to retrieve historical data for a specific time period.</li>
</ul></li>
</ol>
<div id="cell-fig-plot" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yfinance <span class="im">as</span> yf</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fetch_stock_data(ticker, start_date, end_date):</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Fetch historical stock data for a given ticker symbol.</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">    - ticker: Stock ticker symbol (e.g., AAPL for Apple Inc.).</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">    - start_date: Start date for historical data in 'YYYY-MM-DD' format.</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">    - end_date: End date for historical data in 'YYYY-MM-DD' format.</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">    - A DataFrame containing historical stock data.</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    stock_data <span class="op">=</span> yf.download(ticker, start<span class="op">=</span>start_date, end<span class="op">=</span>end_date, progress<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> stock_data</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_metrics(historical_data):</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co">    Calculate Volatility, Volume, and Performance metrics.</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co">    - historical_data: DataFrame containing historical stock data.</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="co">    - DataFrame with added columns for Volatility, Volume, and Performance.</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate Volatility</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    historical_data[<span class="st">'Volatility'</span>] <span class="op">=</span> historical_data[<span class="st">'Close'</span>].pct_change().rolling(window<span class="op">=</span><span class="dv">252</span>).std() <span class="op">*</span> (<span class="dv">252</span><span class="op">**</span><span class="fl">0.5</span>)</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate Volume</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    historical_data[<span class="st">'Volume'</span>] <span class="op">=</span> historical_data[<span class="st">'Volume'</span>].rolling(window<span class="op">=</span><span class="dv">252</span>).mean()</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate Performance</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    historical_data[<span class="st">'Performance'</span>] <span class="op">=</span> historical_data[<span class="st">'Close'</span>].pct_change() <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> historical_data</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_metrics(historical_data):</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a><span class="co">    Plot Volatility, Volume, and Performance using seaborn.</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a><span class="co">    - historical_data: DataFrame containing historical stock data with added metrics.</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>    sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"whitegrid"</span>)</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot Volatility</span></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>    sns.lineplot(data<span class="op">=</span>historical_data[<span class="st">'Volatility'</span>], color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">'Volatility'</span>)</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot Volume</span></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>    sns.lineplot(data<span class="op">=</span>historical_data[<span class="st">'Volume'</span>], color<span class="op">=</span><span class="st">'orange'</span>)</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">'Volume'</span>)</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot Performance</span></span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>    sns.lineplot(data<span class="op">=</span>historical_data[<span class="st">'Performance'</span>], color<span class="op">=</span><span class="st">'green'</span>)</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">'Performance'</span>)</span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage:</span></span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>ticker_symbol <span class="op">=</span> <span class="st">"AAPL"</span>  <span class="co"># Replace with the desired stock symbol</span></span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>start_date <span class="op">=</span> <span class="st">"2021-01-01"</span></span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>end_date <span class="op">=</span> <span class="st">"2023-12-12"</span></span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>historical_data <span class="op">=</span> fetch_stock_data(ticker_symbol, start_date, end_date)</span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>historical_data_with_metrics <span class="op">=</span> calculate_metrics(historical_data)</span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a>plot_metrics(historical_data_with_metrics)</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-plot" class="quarto-figure quarto-figure-center quarto-float anchored" height="752" width="751">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Data Collection_files/figure-html/fig-plot-output-1.png" width="751" height="752" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.1: Plot Volatility, Volume, and Performance
</figcaption>
</figure>
</div>
</div>
</div>
<p>This code provides a visual representation of how these financial indicators change over time as shown in <a href="#fig-plot" class="quarto-xref">Figure&nbsp;<span>1.1</span></a>. Volatility is shown in blue, Volume in orange, and Performance in green. The <code>rolling</code> function is used to calculate these metrics over a specified window, providing a smoothed representation of their trends. The resulting plot helps in understanding the historical behavior of these indicators for the given stock. In the example, the <code>yfinance</code> library is used to fetch historical stock data. You can install it using the command <code>pip install yfinance</code>. Adjust the <code>ticker_symbol</code>, <code>start_date</code>, and <code>end_date</code> variables according to your requirements.</p>
<p>Please note that using this approach, you can gather basic historical price data. For more extensive financial data and external factors that may influence stock performance, you may need to integrate other data sources or APIs into your code.</p>
<ol type="1">
<li><p><strong>Calculate Volatility:</strong></p>
<ul>
<li><p>Volatility is often measured as the standard deviation of the daily returns. In finance, it’s a common metric used to assess the variability of a stock’s price. The formula for calculating volatility is: <span class="math inline">\(\text{Volatility} = \sqrt{\frac{\sum_{i=1}^{N}(R_i - \bar{R})^2}{N}}\)</span> where <span class="math inline">\(R_i\)</span> is the daily return, <span class="math inline">\(\bar{R}\)</span> is the mean of daily returns, and <span class="math inline">\(N\)</span> is the number of days (in this case, the rolling window of 252 days).</p></li>
<li><p>Code for calculating volatility:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>historical_data[<span class="st">'Volatility'</span>] <span class="op">=</span> historical_data[<span class="st">'Close'</span>].rolling(window<span class="op">=</span><span class="dv">252</span>).std() </span></code></pre></div></li>
</ul></li>
<li><p><strong>Calculate Volume:</strong></p>
<ul>
<li><p>Volume is often used as a measure of market activity. It represents the total number of shares traded in a day. In this case, the rolling mean over a window of 252 days is calculated to smooth out short-term fluctuations. The formula is straightforward: <span class="math inline">\(\text{Volume} = \frac{\sum_{i=1}^{N}\text{Volume}_i}{N}\)</span></p></li>
<li><p>Code for calculating volume:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>historical_data[<span class="st">'Volume'</span>] <span class="op">=</span> historical_data[<span class="st">'Volume'</span>].rolling(window<span class="op">=</span><span class="dv">252</span>).mean()</span></code></pre></div></li>
</ul></li>
<li><p><strong>Calculate Performance:</strong></p>
<ul>
<li><p>Performance is typically measured as the percentage change in the closing price from one day to the next. This helps assess the daily returns of the stock. The formula is: <span class="math display">\[\text{Performance}_i = \frac{\text{Close}_{i} - \text{Close}_{i-1}}{\text{Close}_{i-1}}\times 100\]</span> This represents the percentage change in the closing price from day (i-1) to day (i).</p></li>
<li><p>Code for calculating performance:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>historical_data[<span class="st">'Performance'</span>] <span class="op">=</span> historical_data[<span class="st">'Close'</span>].pct_change()</span></code></pre></div></li>
</ul></li>
<li><p><strong>Plotting:</strong></p>
<ul>
<li><p>Finally, the three indicators - Volatility, Volume, and Performance - are plotted using <code>matplotlib</code>. The different colors and labels are added to differentiate between the lines in the plot.</p>
<div class="sourceCode" id="annotated-cell-12"><pre class="sourceCode python code-annotation-code"><code class="sourceCode python"><span id="annotated-cell-12-1"><a href="#annotated-cell-12-1" aria-hidden="true" tabindex="-1"></a>    sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">"whitegrid"</span>)</span>
<span id="annotated-cell-12-2"><a href="#annotated-cell-12-2" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="annotated-cell-12-3"><a href="#annotated-cell-12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-12-4"><a href="#annotated-cell-12-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot Volatility</span></span>
<span id="annotated-cell-12-5"><a href="#annotated-cell-12-5" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="annotated-cell-12-6"><a href="#annotated-cell-12-6" aria-hidden="true" tabindex="-1"></a>    sns.lineplot(data<span class="op">=</span>historical_data[<span class="st">'Volatility'</span>], color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="annotated-cell-12-7"><a href="#annotated-cell-12-7" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">'Volatility'</span>)</span>
<span id="annotated-cell-12-8"><a href="#annotated-cell-12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-12-9"><a href="#annotated-cell-12-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot Volume</span></span>
<span id="annotated-cell-12-10"><a href="#annotated-cell-12-10" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="annotated-cell-12-11"><a href="#annotated-cell-12-11" aria-hidden="true" tabindex="-1"></a>    sns.lineplot(data<span class="op">=</span>historical_data[<span class="st">'Volume'</span>], color<span class="op">=</span><span class="st">'orange'</span>)</span>
<span id="annotated-cell-12-12"><a href="#annotated-cell-12-12" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">'Volume'</span>)</span>
<span id="annotated-cell-12-13"><a href="#annotated-cell-12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-12-14"><a href="#annotated-cell-12-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot Performance</span></span>
<span id="annotated-cell-12-15"><a href="#annotated-cell-12-15" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="annotated-cell-12-16"><a href="#annotated-cell-12-16" aria-hidden="true" tabindex="-1"></a>    sns.lineplot(data<span class="op">=</span>historical_data[<span class="st">'Performance'</span>], color<span class="op">=</span><span class="st">'green'</span>)</span>
<span id="annotated-cell-12-17"><a href="#annotated-cell-12-17" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="st">'Performance'</span>)</span>
<span id="annotated-cell-12-18"><a href="#annotated-cell-12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-12-19"><a href="#annotated-cell-12-19" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="annotated-cell-12-20"><a href="#annotated-cell-12-20" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code></pre></div></li>
</ul></li>
</ol>
<section id="data-reprocessing" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="data-reprocessing"><span class="header-section-number">1.2.1</span> Data Reprocessing</h3>
<p>Data preprocessing is a crucial step in preparing financial data for use in a trading algorithm. The goal is to clean, transform, and structure the data to make it suitable for analysis and modeling. Below are common steps involved in data preprocessing for a trading algorithm using <code>yfinance</code> data:</p>
</section>
<section id="data-retrieval" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="data-retrieval"><span class="header-section-number">1.2.2</span> 1. <strong>Data Retrieval:</strong></h3>
<ul>
<li><p>Use <code>yfinance</code> to download historical stock price data for the desired ticker symbols and time period.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yfinance <span class="im">as</span> yf</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Fetch historical data for AAPL</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>historical_data <span class="op">=</span> yf.download(<span class="st">"AAPL"</span>, start<span class="op">=</span><span class="st">"2022-01-01"</span>, end<span class="op">=</span><span class="st">"2023-01-01"</span>, progress<span class="op">=</span><span class="va">False</span>)</span></code></pre></div></li>
</ul>
</section>
<section id="handling-missing-data" class="level3" data-number="1.2.3">
<h3 data-number="1.2.3" class="anchored" data-anchor-id="handling-missing-data"><span class="header-section-number">1.2.3</span> 2. <strong>Handling Missing Data:</strong></h3>
<ul>
<li><p>Check for missing values in the dataset.</p></li>
<li><p>Decide on a strategy to handle missing data, such as interpolation, forward-fill, or backward-fill.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for missing values</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>missing_values <span class="op">=</span> historical_data.isnull().<span class="bu">sum</span>()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Handle missing values (for example, forward-fill)</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>historical_data <span class="op">=</span> historical_data.ffill()</span></code></pre></div></li>
</ul>
</section>
<section id="feature-engineering" class="level3" data-number="1.2.4">
<h3 data-number="1.2.4" class="anchored" data-anchor-id="feature-engineering"><span class="header-section-number">1.2.4</span> 3. <strong>Feature Engineering:</strong></h3>
<ul>
<li><p>Create new features that might be useful for modeling, such as moving averages, technical indicators, or other relevant financial metrics.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Calculate 10-day simple moving average</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>historical_data[<span class="st">'SMA_10'</span>] <span class="op">=</span> historical_data[<span class="st">'Close'</span>].rolling(window<span class="op">=</span><span class="dv">10</span>).mean()</span></code></pre></div></li>
</ul>
</section>
<section id="normalizationscaling" class="level3" data-number="1.2.5">
<h3 data-number="1.2.5" class="anchored" data-anchor-id="normalizationscaling"><span class="header-section-number">1.2.5</span> 4. <strong>Normalization/Scaling:</strong></h3>
<ul>
<li><p>Normalize or scale numerical features to a common range, especially if using machine learning models sensitive to scale.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MinMaxScaler</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Normalize closing prices</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> MinMaxScaler()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>historical_data[<span class="st">'Close_Normalized'</span>] <span class="op">=</span> scaler.fit_transform(historical_data[<span class="st">'Close'</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>))</span></code></pre></div></li>
</ul>
</section>
<section id="removing-outliers" class="level3" data-number="1.2.6">
<h3 data-number="1.2.6" class="anchored" data-anchor-id="removing-outliers"><span class="header-section-number">1.2.6</span> 5. <strong>Removing Outliers:</strong></h3>
<ul>
<li><p>Identify and handle outliers that might adversely affect model performance.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Remove outliers using z-score</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> zscore</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>z_scores <span class="op">=</span> zscore(historical_data[<span class="st">'Close'</span>])</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>historical_data <span class="op">=</span> historical_data[(z_scores <span class="op">&lt;</span> <span class="dv">3</span>) <span class="op">&amp;</span> (z_scores <span class="op">&gt;</span> <span class="op">-</span><span class="dv">3</span>)]</span></code></pre></div></li>
</ul>
</section>
<section id="time-resampling" class="level3" data-number="1.2.7">
<h3 data-number="1.2.7" class="anchored" data-anchor-id="time-resampling"><span class="header-section-number">1.2.7</span> 6. <strong>Time Resampling:</strong></h3>
<ul>
<li><p>Adjust the frequency of the data (e.g., daily to weekly) if needed.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Resample data to weekly frequency</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>weekly_data <span class="op">=</span> historical_data.resample(<span class="st">'D'</span>).last()</span></code></pre></div></li>
</ul>
</section>
<section id="labeling" class="level3" data-number="1.2.8">
<h3 data-number="1.2.8" class="anchored" data-anchor-id="labeling"><span class="header-section-number">1.2.8</span> 7. <strong>Labeling:</strong></h3>
<ul>
<li><p>For supervised learning, create labels or target variables based on future price movements.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Create binary labels for price increase (1) or decrease (0)</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>historical_data[<span class="st">'Price_Increase'</span>] <span class="op">=</span> (historical_data[<span class="st">'Close'</span>].shift(<span class="op">-</span><span class="dv">1</span>) <span class="op">&gt;</span> historical_data[<span class="st">'Close'</span>]).astype(<span class="bu">int</span>)</span></code></pre></div></li>
</ul>
</section>
<section id="splitting-data" class="level3" data-number="1.2.9">
<h3 data-number="1.2.9" class="anchored" data-anchor-id="splitting-data"><span class="header-section-number">1.2.9</span> 8. <strong>Splitting Data:</strong></h3>
<ul>
<li><p>Split the data into training and testing sets.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Split data into 80% training and 20% testing</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>train_size <span class="op">=</span> <span class="bu">int</span>(<span class="bu">len</span>(historical_data) <span class="op">*</span> <span class="fl">0.8</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>train_data, test_data <span class="op">=</span> historical_data[:train_size], historical_data[train_size:]</span></code></pre></div></li>
</ul>
</section>
<section id="handling-categorical-data" class="level3" data-number="1.2.10">
<h3 data-number="1.2.10" class="anchored" data-anchor-id="handling-categorical-data"><span class="header-section-number">1.2.10</span> 9. <strong>Handling Categorical Data:</strong></h3>
<ul>
<li><p>If there are categorical variables, encode or transform them into a numerical format.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: One-hot encode categorical column 'Category'</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>historical_data <span class="op">=</span> pd.get_dummies(historical_data, columns<span class="op">=</span>[<span class="st">'Category'</span>])</span></code></pre></div></li>
</ul>
</section>
<section id="save-processed-data" class="level3" data-number="1.2.11">
<h3 data-number="1.2.11" class="anchored" data-anchor-id="save-processed-data"><span class="header-section-number">1.2.11</span> 10. <strong>Save Processed Data:</strong></h3>
<ul>
<li><p>Save the preprocessed data for future use to avoid repeating these steps.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Save preprocessed data to a CSV file</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>historical_data.to_csv(<span class="st">'preprocessed_data.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre></div></li>
</ul>
<p>These steps provide a foundation for preparing financial data for trading algorithms. The specific preprocessing steps may vary based on the requirements of your trading strategy and the type of model you intend to use.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          trigger: 'click',
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          positionFixed: true,
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../trading/dppa.html" class="pagination-link  aria-label=" dynamic="" price="" projection="" algorithm="" (dppa)"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Dynamic Price Projection Algorithm (DPPA)</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../summary.html" class="pagination-link" aria-label="<span class='chapter-number'>2</span>&nbsp; <span class='chapter-title'>Summary</span>">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Summary</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>